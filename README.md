# zk-SNARKs Verifier Contract 
This project demonstrates the creation and deployment of a zk-SNARKs verifier contract on the Ethereum Sepolia network. The project involves compiling circuits using `circom`, generating proofs, and verifying them on-chain using a smart contract.

A [hardhat-circom](https://github.com/projectsophon/hardhat-circom) template to generate zero-knowledge circuits, proofs, and solidity verifiers

## Prerequisites

Before starting, ensure you have the following installed:

- [Node.js](https://nodejs.org/) (version 14 or 16 recommended)
- [npm](https://www.npmjs.com/)
- [WSL](https://docs.microsoft.com/en-us/windows/wsl/install) (if using Windows)

## Project Setup

1. **Clone the repository:**

   ```bash
   git clone https://github.com/PallaviSingh262215036/Zk_circuit.git
   cd ZARDKAT
   ```

## Quick Start
Compile the Multi_NOT_add circuit and verify it against a smart contract verifier

```
pragma circom 2.0.0;

// Template for AND operation
template AND() {
    signal input a;
    signal input b;
    signal output out;

    out <== a * b;
}

// Template for NOT operation
template NOT() {
    signal input a;
    signal output out;

    out <== 1 - a;
}

// Template for ADD operation
template ADD() {
    signal input a;
    signal input b;
    signal output out;

    out <== a + b;
}

// Main circuit using AND, NOT, and ADD templates
template Expression() {
    signal input A;
    signal input B;
    signal output X;
    signal output Y;
    signal output Q;

    // Instantiate the AND component for X = A * B
    component and1 = AND();
    and1.a <== A;
    and1.b <== B;
    X <== and1.out;

    // Instantiate the NOT component for Y = !B
    component not1 = NOT();
    not1.a <== B;
    Y <== not1.out;

    // Instantiate the ADD component for Q = X + Y
    component add1 = ADD();
    add1.a <== X;
    add1.b <== Y;
    Q <== add1.out;
}

// Main component instantiation
component main = Expression();
  
```
### Install
`npm install`

### Compile
`npx hardhat circom` 
This will generate the **out** file with circuit intermediaries and geneate the **MultiNOTaddVerifier.sol** contract

### Prove and Deploy
`npx hardhat run scripts/deploy.ts`
This script does 4 things  
1. Deploys the MultiNOTaddVerifier.sol contract
2. Generates a proof from circuit intermediaries with `generateProof()`
3. Generates calldata with `generateCallData()`
4. Calls `verifyProof()` on the verifier contract with calldata

With two commands you can compile a ZKP, generate a proof, deploy a verifier, and verify the proof ðŸŽ‰

## Verifying Proofs On-Chain

After deployment, you can verify proofs with the deployed contract using the following command:

```bash
npx hardhat run scripts/verify.ts --network sepolia
```

## Configuration
### Directory Structure
**circuits**
```
â”œâ”€â”€ Multi_NOT_add
â”‚   â”œâ”€â”€ circuit.circom
â”‚   â”œâ”€â”€ input.json
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ circuit.wasm
â”‚       â”œâ”€â”€  Multi_NOT_add.r1cs
â”‚       â”œâ”€â”€  Multi_NOT_add.vkey
â”‚       â””â”€â”€  Multi_NOT_add.zkey
â”œâ”€â”€ new-circuit
â””â”€â”€ powersOfTau28_hez_final_12.ptau
```
Each new circuit lives in it's own directory. At the top level of each circuit directory lives the circom circuit and input to the circuit.
The **out** directory will be autogenerated and store the compiled outputs, keys, and proofs. The Powers of Tau file comes from the Polygon Hermez ceremony, which saves time by not needing a new ceremony. 


**contracts**
```
contracts
â””â”€â”€ MultiNOTaddVerifier.sol
```
Verifier contracts are autogenerated and prefixed by the circuit name, in this example ** Multi_NOT_add**

## hardhat.config.ts
```
  circom: {
    // (optional) Base path for input files, defaults to `./circuits/`
    inputBasePath: "./circuits",
    // (required) The final ptau file, relative to inputBasePath, from a Phase 1 ceremony
    ptau: "powersOfTau28_hez_final_12.ptau",
    // (required) Each object in this array refers to a separate circuit
    circuits: JSON.parse(JSON.stringify(circuits))
  },
```
### circuits.config.json
circuits configuation is separated from hardhat.config.ts for **autogenerated** purposes (see next section)
```
[
  {
    "name": " Multi_NOT_add",
    "protocol": "groth16",
    "circuit": " Multi_NOT_add/circuit.circom",
    "input": " Multi_NOT_add/input.json",
    "wasm": " Multi_NOT_add/out/circuit.wasm",
    "zkey": " Multi_NOT_add/out/ Multi_NOT_add.zkey",
    "vkey": " Multi_NOT_add/out/ Multi_NOT_add.vkey",
    "r1cs": " Multi_NOT_add/out/ Multi_NOT_add.r1cs",
    "beacon": "0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f"
  }
]
```
## Troubleshooting

- **Ensure you have the correct Node.js version.**  
  Make sure your Node.js version matches the one specified in the project's configuration or requirements.

- **Verify your environment variables are set correctly.**  
  Double-check that your `.env` file contains all necessary variables and that they are correctly configured.

- **Check your input data and circuit for correctness.**  
  Review your input data and circuit files to ensure they are accurate and complete. This includes the structure of your circuit, the validity of your input data, and the consistency of data types.


#L# icense
- This project is licensed under the MIT License. See the LICENSE file for details.
